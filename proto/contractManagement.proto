syntax = "proto3";


option go_package = "./;pb";


message Address {
    string address = 1;
}

message Owner {
    string owner = 1;
}

message AddressOwner {
    string address = 1;
    string owner = 2;
}

message Contract {
    string address = 1;
    string abi = 2;
    repeated string functions = 3;
    int64 max_mintable = 4;
    int64 max_increment = 5;
    string owner = 6;
}

message TransactionRequest {
    string message_sender = 1;
    string function_name = 2;
    int64 num_requested = 3;
    repeated string args = 4;
    Contract contract = 5;
}

message Error {
    string err = 1;
}

message Contracts {
    repeated Contract contracts = 1;
}

service TransactionService {
    rpc GetContract(Address) returns(Contract) {}
    rpc CreateAndStoreTransaction(TransactionRequest) returns (Error) {}
}

service ContractManagement {
    rpc Get(Address) returns(Contract) {}
    rpc Store(Contract) returns (Error) {}
    rpc Delete(AddressOwner) returns (Error) {}
    rpc List(Owner) returns (Contracts) {}
}